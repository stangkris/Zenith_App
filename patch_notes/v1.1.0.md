# üî¨ Backtest System Analysis ‚Äî Zenith App

‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö Backtest ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö

---

## ‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

‡∏£‡∏∞‡∏ö‡∏ö Backtest ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ 3 ‡∏ä‡∏±‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏Å:

```mermaid
flowchart TD
    A["Signal Generation<br/>_strategy_signal_series"] --> B["Trade Simulation<br/>_simulate_trades_from_signals"]
    B --> C["Metrics Computation<br/>_compute_advanced_metrics"]
    C --> D["Summary + Cache<br/>_get_backtest_summary"]
```

---

## ‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏µ

### 1. Pessimistic Intrabar Execution
```python
if hit_tp and hit_sl:
    exit_price = sl           # ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÅ‡∏û‡πâ
    exit_reason = "SL_INTRABAR"
```
- **‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£**: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ä‡∏ô‡∏ó‡∏±‡πâ‡∏á TP ‡πÅ‡∏•‡∏∞ SL ‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏≤‡∏á‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ä‡∏ô‡∏≠‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡∏Å‡πà‡∏≠‡∏ô
- **‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á**: ‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏±‡∏Å Pessimistic Fill ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÅ‡∏û‡πâ‡πÄ‡∏™‡∏°‡∏≠ ‚Äî ‡πÄ‡∏õ‡πá‡∏ô standard practice ‡πÉ‡∏ô backtesting frameworks ‡πÄ‡∏ä‡πà‡∏ô Backtrader, VectorBT
- **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á**: Pardo (2008) *The Evaluation and Optimization of Trading Strategies* ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ pessimistic assumptions ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î overfitting

### 2. Entry Fill Logic (Limit/Stop Style)
```python
fill_mask = (future["low"] <= entry) & (future["high"] >= entry)
if not fill_mask.any():
    exit_reason = "CANCELED"
```
- **‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£**: ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ï‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö Entry ‡∏à‡∏£‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∂‡∏á‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏Ñ‡∏≤ Close ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- **‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á**: ‡∏à‡∏≥‡∏•‡∏≠‡∏á Limit Order / Stop Order ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å fill ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ô‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô "CANCELED"
- **‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤**: ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏∞‡∏ö‡∏ö backtest ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏µ‡πà Close ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏ã‡∏∂‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á

### 3. Time Stop (Horizon-based Exit)
```python
if exit_idx is None:
    exit_price = float(df["close"].iloc[end_idx])
    exit_reason = "TIME_STOP"
```
- **‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£**: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ó‡∏£‡∏î‡πÑ‡∏°‡πà‡∏ä‡∏ô TP/SL ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô N ‡πÅ‡∏ó‡πà‡∏á ‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡πÄ‡∏ó‡∏£‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- **‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á**: ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô "stale trade" ‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‚Äî ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£ Risk Management ‡∏ó‡∏µ‡πà‡∏î‡∏µ
- **Horizon values**: `15min=32, 1h=18, 4h=12, 1day=8` ‡∏™‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏°‡∏ú‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞ timeframe

### 4. R-Multiple Based Metrics
```python
risk = max(entry - sl, 1e-9)
r_result = (exit_price - entry) / risk
```
- **‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£**: ‡∏ß‡∏±‡∏î‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô R-multiple (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á risk) ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô % ‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô
- **‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á**: ‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å Van Tharp ‚Äî *Trade Your Way to Financial Freedom* ‡πÉ‡∏ä‡πâ R-multiple ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ß‡∏±‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô

### 5. Expectancy Formula
```python
expectancy = (win_rate_dec * avg_win_r) - (loss_rate_dec * avg_loss_r)
```
- **‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£**: E = (W% √ó Avg Win) ‚àí (L% √ó Avg Loss)
- **‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á**: ‡∏™‡∏π‡∏ï‡∏£ Edge/Expectancy ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°

### 6. Max Drawdown (R-based Equity Curve)
```python
for r in r_results:
    value += r
    peak = max(value, peak)
    mdd = max(mdd, peak - value)
```
- **‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á**: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì MDD ‡∏à‡∏≤‡∏Å equity curve ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ R-multiple ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢

### 7. Incremental Cache
- ‡∏£‡∏∞‡∏ö‡∏ö cache ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå CSV ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
- ‡∏°‡∏µ `data_start` / `data_end` tracking ‡πÄ‡∏û‡∏∑‡πà‡∏≠ invalidate cache ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
- **‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á**: ‡∏•‡∏î computation time ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

---

## ‚ö†Ô∏è ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤ / ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á

### 1. ‚ùå Fixed 2:1 Risk-Reward Ratio ‡∏ó‡∏∏‡∏Å‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå
```python
tp = float(entry + 2 * risk)   # ‡∏ó‡∏∏‡∏Å strategy ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô
```
| ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå | Risk:Reward |
|---------|-------------|
| SMC | 1:2 (fixed) |
| Momentum Breakout | 1:2 (fixed) |
| Pullback Reversal | 1:2 (fixed) |
| Volume Profile | 1:2 (fixed) |

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: TP ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å structure (‡πÅ‡∏ô‡∏ß‡∏ï‡πâ‡∏≤‡∏ô, Fib extension, ATR-based target) ‡πÅ‡∏ï‡πà‡πÉ‡∏ä‡πâ `2 √ó risk` ‡∏ï‡∏≤‡∏¢‡∏ï‡∏±‡∏ß

**‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏ß‡πà‡∏≤**: TP ‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¥‡∏á market structure ‡πÄ‡∏ä‡πà‡∏ô:
- SMC ‚Üí TP ‡∏ó‡∏µ‡πà zone ‡∏ù‡∏±‡πà‡∏á‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏° ‡∏´‡∏£‡∏∑‡∏≠ Fib extension 1.618
- Momentum ‚Üí TP ‡∏ó‡∏µ‡πà measured move (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß consolidation)
- Pullback ‚Üí TP ‡∏ó‡∏µ‡πà Swing High ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠ Fib 0% (100% retracement)
- Volume ‚Üí TP ‡∏ó‡∏µ‡πà Value Area High/Low

> [!IMPORTANT]
> **‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö**: 2:1 R:R ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ Win Rate ‡∏ï‡πà‡∏≥‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏ö‡∏≤‡∏á setup ‡∏ó‡∏µ‡πà TP ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏Å‡∏ß‡πà‡∏≤ 2R ‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ Win Rate ‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô setup ‡∏ó‡∏µ‡πà TP ‡∏à‡∏£‡∏¥‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏Å‡∏•‡∏Å‡∏ß‡πà‡∏≤ 2R

### 2. ‚ö†Ô∏è Long-Only ‚Äî ‡πÑ‡∏°‡πà‡∏°‡∏µ Short Signal
- ‡∏ó‡∏∏‡∏Å‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ **‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì BUY** ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- ‡πÑ‡∏°‡πà‡∏°‡∏µ SELL/SHORT signal
- **‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö**: Backtest ‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏Ç‡∏≤‡∏•‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì" ‚â† "‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™"
- **‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ**: ‡∏ñ‡πâ‡∏≤ target audience ‡∏Ñ‡∏∑‡∏≠‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏£‡∏≤‡∏¢‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà Short ‚Äî ‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ö‡∏∏‡πÑ‡∏ß‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

### 3. ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏°‡∏µ Slippage / Commission
```python
# ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: Entry/Exit ‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏£‡∏á‡πÄ‡∏õ‡πä‡∏∞
exit_price = sl   # ‡πÑ‡∏°‡πà‡∏°‡∏µ slippage
exit_price = tp   # ‡πÑ‡∏°‡πà‡∏°‡∏µ slippage
```
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: ‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏à‡∏£‡∏¥‡∏á SL/TP ‡∏≠‡∏≤‡∏à‡∏ñ‡∏π‡∏Å fill ‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏¢‡πà‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ (slippage) ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ commission
- **‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö**: Backtest results ‡∏à‡∏∞ optimistic ‡∏Å‡∏ß‡πà‡∏≤‡∏ú‡∏•‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
- **‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: ‡πÄ‡∏û‡∏¥‡πà‡∏° `slippage_pct = 0.05%` ‡πÅ‡∏•‡∏∞ `commission_pct = 0.1%` ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì R

### 4. ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏ß‡∏à Overlapping Trades
```python
for idx in signal_indices:
    # ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¥‡∏™‡∏£‡∏∞ ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πá‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÄ‡∏ó‡∏£‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
```
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì BUY ‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏£‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
- **‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö**: Signal count ‡∏≠‡∏≤‡∏à‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ó‡∏£‡∏î‡∏ã‡πâ‡∏≥
- **‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: ‡πÄ‡∏û‡∏¥‡πà‡∏° logic `skip ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ open position`

### 5. ‚ö†Ô∏è SL Placement ‡∏≠‡∏¥‡∏á ATR ‡πÅ‡∏ï‡πà‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
- SMC: `sl = OB_low - ATR √ó 0.2` (‡∏≠‡∏¥‡∏á zone + ATR)
- Momentum: `sl = min(low_5d, EMA50)` (‡∏≠‡∏¥‡∏á structure)
- Pullback: `sl = Fib_bottom - ATR √ó 0.5` (‡∏≠‡∏¥‡∏á Fib + ATR)
- Volume Profile: `sl = POC - ATR √ó 0.5`

**‡∏î‡∏µ**: SL ‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å structure/zone ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà fixed %
**‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï**: ATR multiplier (0.2, 0.5) ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏≠‡∏á ‡πÑ‡∏°‡πà‡∏°‡∏µ universal "best" value ‚Äî ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á optimize per instrument

---

## üìä Strategy-Specific Analysis

### SMC (BOS/OB/FVG) ‚Äî ‚úÖ ‡∏î‡∏µ
| ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | Implementation | ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á? |
|----------|---------------|---------|
| Trend: ‡∏°‡∏µ BOS | ‚úÖ `detect_bos()` ‡∏´‡∏≤ price structure break | ‚úÖ |
| Zone: ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô OB/FVG | ‚úÖ `price_in_zone()` + `bounced_from_zone()` | ‚úÖ |
| Trigger: ‡πÅ‡∏ó‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ï‡∏±‡∏ß/‡∏ß‡∏≠‡∏•‡∏∏‡πà‡∏°‡∏û‡∏∏‡πà‡∏á | ‚úÖ `bullish_candle_signal()` or volume > 2x avg | ‚úÖ |
| Entry: ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á zone | ‚úÖ `entry = active_zone["high"]` | ‚úÖ |

### Momentum Breakout (EMA50 + VCP) ‚Äî ‚úÖ ‡∏î‡∏µ
| ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | Implementation | ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á? |
|----------|---------------|---------|
| Trend: > EMA50 | ‚úÖ `last_close > last_ema50` | ‚úÖ |
| Zone: Tight consolidation ‡πÉ‡∏Å‡∏•‡πâ‡πÅ‡∏ô‡∏ß‡∏ï‡πâ‡∏≤‡∏ô | ‚úÖ `_is_tight_consolidation()` + `< 3%` from resistance | ‚úÖ |
| Trigger: Break resistance + volume > 2x | ‚úÖ | ‚úÖ |
| Entry: max(close, resistance) | ‚úÖ ‡∏à‡∏≥‡∏•‡∏≠‡∏á stop entry | ‚úÖ |

### Pullback Reversal (EMA200 + Fib + RSI) ‚Äî ‚úÖ ‡∏î‡∏µ
| ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | Implementation | ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á? |
|----------|---------------|---------|
| Trend: > EMA200 | ‚úÖ | ‚úÖ |
| Zone: Fib 50-61.8% | ‚úÖ `fibonacci_levels()` | ‚úÖ |
| Trigger: RSI < 30 / divergence + candle signal | ‚úÖ | ‚úÖ |

### Volume Profile (POC) ‚Äî ‚ö†Ô∏è ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï
| ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | Implementation | ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á? |
|----------|---------------|---------|
| Trend | `True` (hardcoded) | ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏°‡∏µ trend filter |
| Zone: ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà POC | ‚úÖ ATR tolerance | ‚úÖ |
| Trigger: Bounce + volume | ‚úÖ | ‚úÖ |

**‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï**: `trend_pass = True` hardcoded ‚Äî ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ trend filter ‡πÄ‡∏•‡∏¢ ‡∏≠‡∏≤‡∏à‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏Ç‡∏≤‡∏•‡∏á‡πÑ‡∏î‡πâ

---

## üèÜ ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô

| ‡∏´‡∏°‡∏ß‡∏î‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô | ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ |
|-------------|--------|----------|
| Entry Fill Logic | **9/10** | Limit/Stop fill ‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á, CANCELED tracking ‡∏î‡∏µ |
| Exit Logic (TP/SL/Time) | **8/10** | Pessimistic intrabar ‡∏î‡∏µ‡∏°‡∏≤‡∏Å, ‡πÅ‡∏ï‡πà TP fixed 2R |
| Risk Metrics (R-multiple) | **9/10** | ‡πÉ‡∏ä‡πâ R-multiple + Expectancy ‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô |
| Strategy Signal Quality | **8/10** | Checklist-based, ‡∏°‡∏µ structure-based zones |
| Realism | **6/10** | ‡πÑ‡∏°‡πà‡∏°‡∏µ slippage/commission, ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πá‡∏Å overlapping trades |
| Cache/Performance | **9/10** | Incremental + dedup ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏î‡∏µ |

### **‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: 8.2/10** ‚Äî ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏î‡∏µ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏î‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÄ‡∏≠‡∏á

---

## üìö ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢

1. **Van Tharp** ‚Äî *Trade Your Way to Financial Freedom*: R-multiple, Expectancy
2. **Robert Pardo** ‚Äî *The Evaluation and Optimization of Trading Strategies*: Pessimistic fills, walk-forward
3. **Ernest Chan** ‚Äî *Quantitative Trading*: Slippage modeling, transaction costs
4. **Al Brooks** ‚Äî *Trading Price Action*: Structure-based entry/exit
5. **Mark Minervini** ‚Äî *Trade Like a Stock Market Wizard*: VCP / Tight consolidation breakout pattern
